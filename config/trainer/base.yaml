# Base configuration for CycleGAN (paper architecture)
# NOTE: run_name and description MUST be set in experiment configs

# =============================================================================
# Input/Output Settings
# =============================================================================

input_artifact:
  name: "monet-dataset-augmented"
  version: "latest"

s3:
  bucket_name: "personal-data-science-data"
  prefix: "monet-gan/models"

wandb:
  project_name: "monet-gan"
  entity: null
  tags:
    - "pipeline"
    - "trainer"

# =============================================================================
# LEGO-style Generator (CycleGAN paper - ResNet)
# =============================================================================
# Available blocks:
# conv:
#   in_channels, out_channels, kernel_size, stride, padding, padding_mode (optional), norm, activation
# conv_transpose:
#   in_channels, out_channels, kernel_size, stride, padding, output_padding, norm, activation
# residual:
#   channels, kernel_size, padding_mode (optional), norm, activation, dropout
# output:
#   use conv with activation tanh

generator:
  encoder:
    # c7s1-64
    - type: conv
      in_channels: 3
      out_channels: 64
      kernel_size: 7
      stride: 1
      padding: 3
      padding_mode: reflect
      norm: instance
      activation: relu
    # d128
    - type: conv
      in_channels: 64
      out_channels: 128
      kernel_size: 3
      stride: 2
      padding: 1
      padding_mode: reflect
      norm: instance
      activation: relu
    # d256
    - type: conv
      in_channels: 128
      out_channels: 256
      kernel_size: 3
      stride: 2
      padding: 1
      padding_mode: reflect
      norm: instance
      activation: relu

  bottleneck:
    # R256 x9 for 256x256 training (use 6 blocks for <=128)
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0
    - type: residual
      channels: 256
      kernel_size: 3
      padding_mode: reflect
      norm: instance
      activation: relu
      dropout: 0.0

  decoder:
    # u128
    - type: conv_transpose
      in_channels: 256
      out_channels: 128
      kernel_size: 3
      stride: 2
      padding: 1
      output_padding: 1
      norm: instance
      activation: relu
    # u64
    - type: conv_transpose
      in_channels: 128
      out_channels: 64
      kernel_size: 3
      stride: 2
      padding: 1
      output_padding: 1
      norm: instance
      activation: relu

  output:
    # c7s1-3
    - type: conv
      in_channels: 64
      out_channels: 3
      kernel_size: 7
      stride: 1
      padding: 3
      padding_mode: reflect
      norm: none
      activation: tanh

  skip_connections: []

# =============================================================================
# Discriminator (70x70 PatchGAN)
# =============================================================================

discriminator:
  type: patchgan
  input_channels: 3
  base_channels: 64
  num_layers: 3
  kernel_size: 4
  norm: instance
  activation: leaky_relu
  use_sigmoid: false
